import{_ as t,c as a,o as i,ae as n}from"./chunks/framework.2MVDia4S.js";const g=JSON.parse('{"title":"Introduction","description":"","frontmatter":{},"headers":[],"relativePath":"guide/introduction.md","filePath":"guide/introduction.md"}'),o={name:"guide/introduction.md"};function s(r,e,l,c,d,h){return i(),a("div",null,[...e[0]||(e[0]=[n(`<h1 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">â€‹</a></h1><p>EthBFT is an experimental, lightweight bridge that drives an Ethereum Execution Layer (EL) client (e.g. Geth) using CometBFT block heights as a timing/advancement signal. It focuses on the <strong>Engine API orchestration loop</strong> (forkchoice + payload production) rather than full state / transaction integration. For every new CometBFT height, EthBFT requests the EL to build (currently empty) blocks and advances forkchoice accordingly.</p><blockquote><p><strong>Status:</strong> Proofâ€‘ofâ€‘concept / demo. ABCI logic includes basic transaction validation. Blocks produced by Geth include transactions injected from CometBFT. Expect breaking changes.</p></blockquote><h2 id="ðŸš€-features-current-scope" tabindex="-1">ðŸš€ Features (Current Scope) <a class="header-anchor" href="#ðŸš€-features-current-scope" aria-label="Permalink to &quot;ðŸš€ Features (Current Scope)&quot;">â€‹</a></h2><ul><li><strong>Engine API Loop</strong>: Implements the minimal sequence: forkchoiceUpdated â†’ getPayload â†’ newPayload â†’ forkchoiceUpdated (final) per CometBFT height.</li><li><strong>Height Tracking</strong>: Maintains mapping of CometBFT height â†’ EL head hash to choose parents. Persisted to disk (<code>ethbft_state.json</code>).</li><li><strong>ABCI Integration</strong>: Implements ABCI methods with transaction validation (RLP decoding &amp; ChainID check) and injection into Geth.</li><li><strong>Dynamic Parent Selection</strong>: Falls back to EL latest head or genesis if internal map has no parent yet.</li><li><strong>Finality Lag</strong>: Configurable <code>finalityDepth</code> to delay safe/finalized head updates relative to current head.</li><li><strong>JWT (HS256) Auth</strong>: Automatically signs Engine API calls when a JWT secret is provided.</li><li><strong>Health &amp; Metrics</strong>: HTTP <code>/health</code> (port 8081), Prometheus metrics, plus ABCI socket (8080).</li><li><strong>Docker Stack</strong>: Oneâ€‘command demo bringing up Geth + EthBFT + CometBFT.</li><li><strong>Configurable</strong>: Supports <code>feeRecipient</code> and bridging toggle.</li></ul><h2 id="architecture-flow" tabindex="-1">Architecture &amp; Flow <a class="header-anchor" href="#architecture-flow" aria-label="Permalink to &quot;Architecture &amp; Flow&quot;">â€‹</a></h2><p>Highâ€‘level data/control flow (current minimal mode):</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A[CometBFT] -- Height Increment --&gt; B[EthBFT Loop]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B -- 1) forkchoiceUpdated --&gt; C[Geth Engine API]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B -- 2) getPayload --&gt; C</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B -- 3) newPayload --&gt; C</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B -- 4) forkchoiceUpdated --&gt; C</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C -- Block Production --&gt; B</span></span></code></pre></div><ol><li>Poll CometBFT <code>status</code> every 2s; detect new <code>latest_block_height</code>.</li><li>For each new height H: pick parent hash (cached prior EL head or fallback) and run Engine API sequence.</li><li>Set head/safe/finalized all to the newly produced block hash (demo simplification).</li><li>Cache (H â†’ headHash) for next iteration.</li></ol>`,9)])])}const u=t(o,[["render",s]]);export{g as __pageData,u as default};
