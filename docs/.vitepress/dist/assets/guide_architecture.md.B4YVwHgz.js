import{_ as a,c as n,o as t,ae as s}from"./chunks/framework.2MVDia4S.js";const g=JSON.parse('{"title":"Architecture","description":"","frontmatter":{},"headers":[],"relativePath":"guide/architecture.md","filePath":"guide/architecture.md"}'),i={name:"guide/architecture.md"};function o(r,e,p,c,l,h){return t(),n("div",null,[...e[0]||(e[0]=[s(`<h1 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;Architecture&quot;">â€‹</a></h1><p>EthBFT acts as the glue between CometBFT and the Ethereum Execution Layer.</p><h2 id="ğŸ“-project-structure" tabindex="-1">ğŸ“ Project Structure <a class="header-anchor" href="#ğŸ“-project-structure" aria-label="Permalink to &quot;ğŸ“ Project Structure&quot;">â€‹</a></h2><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ethbft/</span></span>
<span class="line"><span>â”œâ”€â”€ cmd/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ ethbft/             # Main application entry point</span></span>
<span class="line"><span>â”œâ”€â”€ pkg/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ bridge/             # Bridge between CometBFT height and Engine API</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ bridge.go       # Engine API orchestration &amp; height loop</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ server.go       # ABCI server + health HTTP server</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ types.go        # Aliases of go-ethereum Engine API types</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ config/             # Configuration management</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ consensus/          # CometBFT client integration</span></span>
<span class="line"><span>â”‚   â””â”€â”€ ethereum/           # Ethereum client integration</span></span>
<span class="line"><span>â”œâ”€â”€ config/                 # Configuration files</span></span>
<span class="line"><span>â”œâ”€â”€ scripts/                # Utility scripts</span></span>
<span class="line"><span>â”œâ”€â”€ docker-compose.yml      # Docker orchestration</span></span>
<span class="line"><span>â”œâ”€â”€ Dockerfile              # Container definition</span></span>
<span class="line"><span>â”œâ”€â”€ Makefile                # Build and development commands</span></span>
<span class="line"><span>â”œâ”€â”€ go.mod                  # Go module definition</span></span>
<span class="line"><span>â””â”€â”€ README.md               # Overview</span></span></code></pre></div><h2 id="engine-api-orchestration" tabindex="-1">Engine API Orchestration <a class="header-anchor" href="#engine-api-orchestration" aria-label="Permalink to &quot;Engine API Orchestration&quot;">â€‹</a></h2><p>EthBFT implements the minimal sequence required by the Engine API to produce and advance blocks:</p><ol><li><strong><code>engine_forkchoiceUpdatedV2</code></strong>: Notifies the EL of the latest head and provides payload attributes for building the next block.</li><li><strong><code>engine_getPayloadV2</code></strong>: Retrieves the built execution payload from the EL.</li><li><strong><code>engine_newPayloadV2</code></strong>: Submits the payload back to the EL for validation.</li><li><strong><code>engine_forkchoiceUpdatedV2</code></strong>: Finalizes the block as the new head.</li></ol><h2 id="height-mapping" tabindex="-1">Height Mapping <a class="header-anchor" href="#height-mapping" aria-label="Permalink to &quot;Height Mapping&quot;">â€‹</a></h2><p>EthBFT maintains a mapping of <code>CometBFT Height -&gt; Ethereum Block Hash</code>. This ensures that the blockchain continues linearly and that EthBFT knows exactly which parent to use for a given CometBFT height. This state is persisted to <code>ethbft_state.json</code>.</p>`,9)])])}const u=a(i,[["render",o]]);export{g as __pageData,u as default};
